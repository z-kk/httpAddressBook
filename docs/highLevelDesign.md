# 概要設計書

## 概要

- 年賀状の宛名管理を主目的とした住所録アプリ
- アプリを起動することでHTTPサーバとなり, Webブラウザでアクセスして使用する
- ローカルからのアクセスのみを想定するため, ログイン機能はない
- 住所録の他, 年賀状の授受記録機能も搭載する

## 各機能, 画面

### 起動

- 初回起動時にポートやDBの設定を入力する(コマンドライン入力)
- 設定情報にDBのパスワードがなければパスワードを入力する

### トップ画面

- Webページのトップ画面
- 各機能へのリンクを表示する

### 住所録一覧画面

- 登録されているデータを表示する
- データの検索機能がある
- 表示項目は変更できる
- データを選択することで編集画面に移動する

### データ編集画面

- 登録されているデータを編集する

### 授受記録登録画面

- 授受物の種類を選択(初期値: 年賀状)
- 受信/送信を選択(初期値: 受信)
- 日付を選択(初期値: 今日)
- 対象年を選択(初期値: 1～10月は今年, 11～12月は来年)
- 対象のデータを一覧からチェックボックスで選択
    - 一覧には 種類, 受信/送信, 対象年 が同じデータが存在すれば表示しない
    - 受信登録時は 種類, 対象年 が同じデータがあるものが上, ないものが下に表示する

### 授受記録表示画面

- 授受記録を表で表示する
- 何年前の記録まで表示するか変更可能(初期値: 5年)
- チェックボックスで表示する授受物の種類を指定できる

### CSV作成機能

- 年賀状を送る対象の氏名, 住所, 授受履歴をCSVにする

### 設定変更画面

- ポートやDB等, 初回起動時に設定した値を変更できる

## 設定

設定情報はアプリと同じディレクトリにjsonファイルとして保存する

### アプリ自体の設定

- 起動ポート

### DBの設定

- mySQL(mariaDB) or sqlite
- DB名
- ユーザ名
- パスワード(任意; なければアプリ起動時に入力を要求)

## データ構造

### 住所録データ

- データID(変更不可)
- 姓
- 名
- 郵便番号
- 住所(番地)
- 住所(建物名等)
- 電話番号
- メールアドレス
- グループID
- 年賀状を送る/送らない
- 並び順

### グループデータ

- グループID(変更不可)
- グループ名
- 並び順

### 授受記録データ

- データID(通し番号, 変更不可)
- 住所録データID
- 受信/送信
- 日付
- 種類ID(年賀状/喪中はがき/暑中見舞い等)

### 授受物種類データ

- 種類ID
- 名称

### 郵便番号データ

- 郵便番号
- 都道府県
- 市町村
